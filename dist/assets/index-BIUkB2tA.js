const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-D1EphRXL.js","assets/storyModel-Cl2lOAwe.js","assets/idb-AsxtWpiW.js","assets/storyApi-CisDlYOj.js","assets/favoritesModel-BngbJ05d.js","assets/AuthView-CQoC4hIH.js","assets/AddView-B5eB2ZQx.js","assets/FavoritesView-DwQNNrNj.js"])))=>i.map(i=>d[i]);
(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}})();const B="modulepreload",N=function(e){return"/noteapp-book/"+e},I={},u=function(n,i,a){let t=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));t=Promise.allSettled(i.map(c=>{if(c=N(c),c in I)return;I[c]=!0;const h=c.endsWith(".css"),A=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${A}`))return;const l=document.createElement("link");if(l.rel=h?"stylesheet":B,h||(l.as="script"),l.crossOrigin="",l.href=c,s&&l.setAttribute("nonce",s),document.head.appendChild(l),h)return new Promise((O,T)=>{l.addEventListener("load",O),l.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return t.then(o=>{for(const s of o||[])s.status==="rejected"&&r(s.reason);return n().catch(r)})},P={"/":()=>u(()=>import("./HomeView-D1EphRXL.js"),__vite__mapDeps([0,1,2,3,4])).then(e=>e.default),"/auth":()=>u(()=>import("./AuthView-CQoC4hIH.js"),__vite__mapDeps([5,3])).then(e=>e.default),"/add":()=>u(()=>import("./AddView-B5eB2ZQx.js"),__vite__mapDeps([6,1,2,3])).then(e=>e.default),"/favorites":()=>u(()=>import("./FavoritesView-DwQNNrNj.js"),__vite__mapDeps([7,4,2])).then(e=>e.default),"*":()=>u(()=>import("./NotFoundView-K9wNmN2R.js"),[]).then(e=>e.default)};async function U(){const e=(location.hash||"#/").slice(1)||"/";return(P[e]||P["*"])()}function y(){const e=document.getElementById("main");e&&location.hash==="#main"&&requestAnimationFrame(()=>e.focus())}function E(){const e=document.getElementById("main");e&&e.focus()}async function W(){if("serviceWorker"in navigator)try{const{registerSW:e}=await u(async()=>{const{registerSW:n}=await import("./virtual_pwa-register-9KwWY2jh.js");return{registerSW:n}},[]);e({immediate:!0})}catch{await navigator.serviceWorker.register("/noteapp-book/sw.js")}}const C=e=>{const n="=".repeat((4-e.length%4)%4),i=(e+n).replace(/\-/g,"+").replace(/_/g,"/"),a=atob(i),t=new Uint8Array(a.length);for(let r=0;r<a.length;++r)t[r]=a.charCodeAt(r);return t},D="BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk";async function V(){if(!("Notification"in window))throw new Error("Browser tidak mendukung Notification");if(await Notification.requestPermission()!=="granted")throw new Error("Izin notifikasi ditolak");await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:C(D)})}let f;async function R(e){S(),f=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}),e.srcObject=f,await e.play()}function K(e){const n=document.createElement("canvas");return n.width=e.videoWidth,n.height=e.videoHeight,n.getContext("2d").drawImage(e,0,0),new Promise(a=>n.toBlob(a,"image/jpeg",.85))}function S(){f&&(f.getTracks().forEach(e=>e.stop()),f=null)}const w="token",v="userName",L={getToken:()=>localStorage.getItem(w),setToken:e=>e?localStorage.setItem(w,e):localStorage.removeItem(w),clearToken:()=>localStorage.removeItem(w),getUserName:()=>localStorage.getItem(v)||"",setUserName:e=>e&&e.trim()?localStorage.setItem(v,e):localStorage.removeItem(v),clearUserName:()=>localStorage.removeItem(v)};(!location.hash||location.hash==="#")&&location.replace("#/");let d;const m=document.getElementById("installBtn"),p=document.getElementById("enablePushBtn"),k=document.getElementById("loginLink"),g=document.getElementById("logoutBtn");function _(){const e=!!L.getToken();k&&(k.hidden=e),g&&(g.hidden=!e)}_();g==null||g.addEventListener("click",()=>{L.clearToken(),localStorage.removeItem("userName"),_(),location.hash="#/"});window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),d=e,m.hidden=!1});m==null||m.addEventListener("click",async()=>{m.hidden=!0,d==null||d.prompt(),await(d==null?void 0:d.userChoice),d=null});p==null||p.addEventListener("click",async()=>{try{await V(),alert("Notifikasi diaktifkan!")}catch(e){console.error(e),alert("Gagal mengaktifkan notifikasi")}});window.addEventListener("hashchange",()=>{location.hash!=="#main"&&(S(),b())});window.addEventListener("load",async()=>{var e,n;y==null||y(),await W();try{await navigator.serviceWorker.ready;const i="PushManager"in window&&"Notification"in window,a=/iPhone|iPad|iPod/i.test(navigator.userAgent),t=((n=(e=window.matchMedia)==null?void 0:e.call(window,"(display-mode: standalone)"))==null?void 0:n.matches)||window.navigator.standalone===!0;i&&(!a||t)&&(p.hidden=!1)}catch{}_(),await b()});async function b(){const e=await U(),n=document.getElementById("main");n.innerHTML="",await new e().render(n),E==null||E()}export{L as S,u as _,S as a,K as c,R as s};
